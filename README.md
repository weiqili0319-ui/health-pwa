# 健康记录 PWA - 纯本地存储版本

完全离线可用的健康记录应用，数据存储在手机浏览器本地，无需任何服务器。

## 特性

- 🎤 语音识别记录血糖血压
- 🔊 语音播报汇总报告
- 📱 添加到桌面，像原生 App
- 🔒 数据存储在手机本地，隐私安全
- 📴 离线也能使用
- 📤 支持数据导出

## 部署方式

### 方式一：GitHub Pages（推荐）

1. 在 GitHub 创建新仓库，例如 `health-pwa`

2. 上传这些文件到仓库：
   ```
   index.html
   app.js
   sw.js
   manifest.json
   icon-192.png
   icon-512.png
   ```

3. 进入仓库 Settings → Pages

4. Source 选择 `main` 分支，保存

5. 等待几分钟，访问：`https://你的用户名.github.io/health-pwa`

### 方式二：Vercel

1. 注册 [Vercel](https://vercel.com)
2. 导入 GitHub 仓库或直接拖拽文件夹
3. 自动部署，获得 HTTPS 地址

### 方式三：Netlify

1. 注册 [Netlify](https://netlify.com)
2. 拖拽 `pwa-local` 文件夹到部署区域
3. 自动获得 HTTPS 地址

### 方式四：本地测试

```bash
cd pwa-local
python3 -m http.server 8080
```
然后访问 `http://localhost:8080`

⚠️ 注意：语音识别需要 HTTPS，本地测试时部分浏览器可能限制。

## 使用方法

### 添加到手机桌面

**iPhone (Safari)**
1. 用 Safari 打开网址
2. 点击分享按钮 ↑
3. 选择「添加到主屏幕」

**Android / 华为**
1. 用 Chrome 或华为浏览器打开
2. 点击菜单（三个点）
3. 选择「添加到主屏幕」

### 语音记录

1. 点击麦克风按钮
2. 说出数据，例如：
   - "血糖 6.4"
   - "血压 130 85"
   - "血糖 5.8 血压 125 80"（同时记录两项）

### 查看报告

点击快捷按钮：
- **今日汇总** - 今天的记录统计
- **三日报** - 过去 3 天统计
- **周报** - 过去 7 天统计
- **最新数据** - 最近一次记录

### 数据导出

点击「导出」按钮，下载 JSON 格式的所有数据。

## 小艺/Siri 快捷指令

### 华为小艺

创建快捷指令，触发词 → 打开网页：

| 触发词 | URL |
|--------|-----|
| 记录健康 | `https://你的域名/?action=record` |
| 健康周报 | `https://你的域名/?action=weekly` |
| 健康三日报 | `https://你的域名/?action=3day` |

### iOS Siri

创建快捷指令 → 打开 URL：

| 触发词 | URL |
|--------|-----|
| 记录健康 | `https://你的域名/?action=record` |
| 健康周报 | `https://你的域名/?action=weekly` |

## 数据存储

数据存储在浏览器的 IndexedDB 中：
- 🔒 数据只存在你的设备上
- ⚠️ 清除浏览器数据会丢失记录
- 💾 建议定期导出备份

## 浏览器支持

| 浏览器 | 语音识别 | 离线支持 |
|--------|---------|---------|
| Chrome (Android) | ✅ | ✅ |
| Safari (iOS) | ✅ | ✅ |
| 华为浏览器 | ✅ | ✅ |
| Firefox | ❌ | ✅ |

## 常见问题

### 语音识别不工作？

1. 确保使用 HTTPS 访问
2. 允许麦克风权限
3. 尝试使用 Chrome 浏览器

### 数据会丢失吗？

以下情况会丢失数据：
- 清除浏览器数据/缓存
- 卸载浏览器
- 重置手机

建议定期使用「导出」功能备份数据。

## 免责声明

本应用仅供个人健康记录参考，非医疗设备。
如有健康问题请咨询专业医生。
